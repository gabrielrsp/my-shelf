{"ast":null,"code":"var _jsxFileName = \"/home/gabriel/my-shelf/src/pages/Main/index.js\";\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BookList, Container, Form, SubmitButton, UpdateButton } from './styles';\nimport { FaPlus, FaEdit, FaTimes } from \"react-icons/fa\";\nimport BookItem from '../../components/BookItem';\n\nfunction Main() {\n  const [book, setBook] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newAuthor, setNewAuthor] = useState('');\n  const [newUrl, setNewUrl] = useState('');\n  const [newNotes, setNewNotes] = useState('');\n  const [id, setId] = useState('');\n  const [box, setBox] = useState();\n  const handleAdd = useCallback(e => {\n    if (newName) {\n      e.preventDefault();\n      let id = Math.floor(Math.random() * 700); //validation for duplicate ID' and set limit for book amount\n\n      for (let i = 0; i < book.length; i++) {\n        if (id === book[i].id) {\n          console.log('igual a' + id + '!');\n\n          if (book.length >= 4) {\n            window.alert(\"You reached the limit of books!\");\n            return 0;\n          } else id = Math.floor(Math.random() * 700);\n\n          i = 0;\n        }\n      }\n\n      setBook([...book, {\n        newName,\n        newAuthor,\n        newUrl,\n        newNotes,\n        id\n      }]);\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      setId('');\n    } else alert('Book name is Required!');\n\n    e.preventDefault();\n  });\n\n  function handleUpdate(e) {\n    e.preventDefault();\n    const data = [...book];\n    const index = data.findIndex(obj => data.indexOf(obj) === book.indexOf(obj));\n    let secData = { ...data[index]\n    };\n    secData.newName = newName;\n    secData.newAuthor = newAuthor;\n    secData.newUrl = newUrl;\n    secData.newNotes = newNotes;\n    secData.id = id;\n    let newObj = { ...secData\n    };\n    let arr = [];\n    data.forEach(b => arr.push(b));\n    const currentObj = arr.find(obj => obj.newName === newObj.newName);\n    const destObj = { ...currentObj\n    };\n    destObj.newName = newName;\n    destObj.newAuthor = newAuthor;\n    destObj.newUrl = newUrl;\n    destObj.newNotes = newNotes;\n    destObj.id = Math.floor(Math.random() * 700);\n    setBook([...data.filter(b => b.id !== secData.id), destObj]);\n    handleClean(e);\n  }\n\n  function handleEdit(bookItem) {\n    setBox(true);\n    setNewName(bookItem.newName);\n    setNewAuthor(bookItem.newAuthor);\n    setNewUrl(bookItem.newUrl);\n    setNewNotes(bookItem.newNotes);\n    setId(bookItem.id);\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  }\n\n  function handleClean(e) {\n    e.preventDefault();\n    setNewName('');\n    setNewAuthor('');\n    setNewUrl('');\n    setNewNotes('');\n    setId('');\n    toggleBox();\n  }\n\n  function toggleBox() {\n    setBox(!box);\n  }\n\n  function handleDelete(bookItem) {\n    const r = window.confirm(\"Are you sure you want to dele this book?\");\n\n    if (r) {\n      setBook(book.filter(b => b !== bookItem));\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      toggleBox();\n      setBox(false);\n    }\n  }\n\n  useEffect(() => {\n    const data = localStorage.getItem('book-list');\n\n    if (data) {\n      setBook(JSON.parse(data));\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('book-list', JSON.stringify(book));\n  }, [book]);\n  const bookSize = useMemo(() => book.length, [book]);\n  return React.createElement(React.Fragment, null, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \"Add Book to the Shelf\"), React.createElement(Form, {\n    onSubmit: () => {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Book Name\",\n    value: newName,\n    name: \"name\",\n    onChange: e => setNewName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Author\",\n    value: newAuthor,\n    name: \"author\",\n    onChange: e => setNewAuthor(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"URL image\",\n    value: newUrl,\n    name: \"url\",\n    onChange: e => setNewUrl(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), React.createElement(\"textarea\", {\n    type: \"text\",\n    placeholder: \"Notes\",\n    value: newNotes,\n    name: \"notes\",\n    onChange: e => setNewNotes(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }), !box ? React.createElement(SubmitButton, {\n    onClick: handleAdd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(FaPlus, {\n    color: \"#fff\",\n    size: 22,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, \"Add Book\")) : React.createElement(React.Fragment, null), box ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(UpdateButton, {\n    onClick: handleUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(FaEdit, {\n    color: \"#fff\",\n    size: 22,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Save Changes\")), React.createElement(UpdateButton, {\n    onClick: handleClean,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, React.createElement(FaTimes, {\n    color: \"#fff\",\n    size: 22,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, \"Cancel\"))) : React.createElement(React.Fragment, null)), bookSize > 1 || bookSize === 0 ? React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, \"You have \", bookSize, \" books\") : React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"You have \", bookSize, \" book\")), React.createElement(BookList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, book.map(book => React.createElement(BookItem, {\n    key: book.id,\n    book: book,\n    onDelete: () => {\n      handleDelete(book);\n    },\n    onEdit: () => {\n      handleEdit(book);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }))));\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/gabriel/my-shelf/src/pages/Main/index.js"],"names":["React","useState","useEffect","useMemo","useCallback","BookList","Container","Form","SubmitButton","UpdateButton","FaPlus","FaEdit","FaTimes","BookItem","Main","book","setBook","newName","setNewName","newAuthor","setNewAuthor","newUrl","setNewUrl","newNotes","setNewNotes","id","setId","box","setBox","handleAdd","e","preventDefault","Math","floor","random","i","length","console","log","window","alert","handleUpdate","data","index","findIndex","obj","indexOf","secData","newObj","arr","forEach","b","push","currentObj","find","destObj","filter","handleClean","handleEdit","bookItem","scrollTo","top","behavior","toggleBox","handleDelete","r","confirm","localStorage","getItem","JSON","parse","setItem","stringify","bookSize","target","value","map"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,OAArC,EAA8CC,WAA9C,QAAgE,OAAhE;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,IAA9B,EAAoCC,YAApC,EAAkDC,YAAlD,QAAuE,UAAvE;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,OAAzB,QAAyC,gBAAzC;AACA,OAAOC,QAAP,MAAqB,2BAArB;;AAEA,SAASC,IAAT,GAAgB;AAEd,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACkB,SAAD,EAAYC,YAAZ,IAA4BnB,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACoB,MAAD,EAASC,SAAT,IAAsBrB,QAAQ,CAAC,EAAD,CAApC;AAEA,QAAM,CAACsB,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACwB,EAAD,EAAKC,KAAL,IAAczB,QAAQ,CAAC,EAAD,CAA5B;AAEA,QAAK,CAAC0B,GAAD,EAAMC,MAAN,IAAgB3B,QAAQ,EAA7B;AAEA,QAAM4B,SAAS,GAAGzB,WAAW,CAAE0B,CAAC,IAAI;AAElC,QAAIb,OAAJ,EAAY;AAEZa,MAAAA,CAAC,CAACC,cAAF;AAEA,UAAIN,EAAE,GAAGO,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAT,CAJY,CAMZ;;AACA,WAAI,IAAIC,CAAC,GAAE,CAAX,EAAcA,CAAC,GAACpB,IAAI,CAACqB,MAArB,EAA6BD,CAAC,EAA9B,EAAiC;AAC/B,YAAGV,EAAE,KAAKV,IAAI,CAACoB,CAAD,CAAJ,CAAQV,EAAlB,EAAqB;AACjBY,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAWb,EAAX,GAAgB,GAA5B;;AACA,cAAGV,IAAI,CAACqB,MAAL,IAAe,CAAlB,EAAoB;AAClBG,YAAAA,MAAM,CAACC,KAAP,CAAa,iCAAb;AACA,mBAAO,CAAP;AACD,WAHD,MAIAf,EAAE,GAAGO,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAL;;AACAC,UAAAA,CAAC,GAAC,CAAF;AACH;AACF;;AAEDnB,MAAAA,OAAO,CAAC,CAAE,GAAGD,IAAL,EACN;AACAE,QAAAA,OADA;AAEAE,QAAAA,SAFA;AAGAE,QAAAA,MAHA;AAIAE,QAAAA,QAJA;AAKAE,QAAAA;AALA,OADM,CAAD,CAAP;AASAP,MAAAA,UAAU,CAAC,EAAD,CAAV;AACAE,MAAAA,YAAY,CAAC,EAAD,CAAZ;AACAE,MAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,MAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,MAAAA,KAAK,CAAC,EAAD,CAAL;AAED,KAlCC,MAmCAc,KAAK,CAAC,wBAAD,CAAL;;AACAV,IAAAA,CAAC,CAACC,cAAF;AACD,GAvC4B,CAA7B;;AAyCE,WAASU,YAAT,CAAsBX,CAAtB,EAAwB;AAEtBA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMW,IAAI,GAAG,CAAC,GAAG3B,IAAJ,CAAb;AACA,UAAM4B,KAAK,GAAGD,IAAI,CAACE,SAAL,CAAeC,GAAG,IAAIH,IAAI,CAACI,OAAL,CAAaD,GAAb,MAAsB9B,IAAI,CAAC+B,OAAL,CAAaD,GAAb,CAA5C,CAAd;AAEA,QAAIE,OAAO,GAAG,EAAC,GAAGL,IAAI,CAACC,KAAD;AAAR,KAAd;AAEAI,IAAAA,OAAO,CAAC9B,OAAR,GAAmBA,OAAnB;AACA8B,IAAAA,OAAO,CAAC5B,SAAR,GAAoBA,SAApB;AACA4B,IAAAA,OAAO,CAAC1B,MAAR,GAAiBA,MAAjB;AACA0B,IAAAA,OAAO,CAACxB,QAAR,GAAmBA,QAAnB;AACAwB,IAAAA,OAAO,CAACtB,EAAR,GAAaA,EAAb;AAEA,QAAIuB,MAAM,GAAG,EAAC,GAAGD;AAAJ,KAAb;AACA,QAAIE,GAAG,GAAG,EAAV;AAEAP,IAAAA,IAAI,CAACQ,OAAL,CAAcC,CAAD,IAAOF,GAAG,CAACG,IAAJ,CAASD,CAAT,CAApB;AAEA,UAAME,UAAU,GAAGJ,GAAG,CAACK,IAAJ,CAAST,GAAG,IAAIA,GAAG,CAAC5B,OAAJ,KAAgB+B,MAAM,CAAC/B,OAAvC,CAAnB;AACA,UAAMsC,OAAO,GAAG,EAAC,GAAGF;AAAJ,KAAhB;AAEAE,IAAAA,OAAO,CAACtC,OAAR,GAAmBA,OAAnB;AACAsC,IAAAA,OAAO,CAACpC,SAAR,GAAoBA,SAApB;AACAoC,IAAAA,OAAO,CAAClC,MAAR,GAAiBA,MAAjB;AACAkC,IAAAA,OAAO,CAAChC,QAAR,GAAmBA,QAAnB;AACAgC,IAAAA,OAAO,CAAC9B,EAAR,GAAaO,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAb;AAEAlB,IAAAA,OAAO,CAAC,CAAE,GAAG0B,IAAI,CAACc,MAAL,CAAaL,CAAC,IAAIA,CAAC,CAAC1B,EAAF,KAASsB,OAAO,CAACtB,EAAnC,CAAL,EACN8B,OADM,CAAD,CAAP;AAIAE,IAAAA,WAAW,CAAC3B,CAAD,CAAX;AACD;;AAED,WAAS4B,UAAT,CAAoBC,QAApB,EAA6B;AAE3B/B,IAAAA,MAAM,CAAC,IAAD,CAAN;AACAV,IAAAA,UAAU,CAACyC,QAAQ,CAAC1C,OAAV,CAAV;AACAG,IAAAA,YAAY,CAACuC,QAAQ,CAACxC,SAAV,CAAZ;AACAG,IAAAA,SAAS,CAACqC,QAAQ,CAACtC,MAAV,CAAT;AACAG,IAAAA,WAAW,CAACmC,QAAQ,CAACpC,QAAV,CAAX;AACAG,IAAAA,KAAK,CAACiC,QAAQ,CAAClC,EAAV,CAAL;AAEAc,IAAAA,MAAM,CAACqB,QAAP,CAAgB;AACdC,MAAAA,GAAG,EAAE,CADS;AAEdC,MAAAA,QAAQ,EAAE;AAFI,KAAhB;AAKD;;AAED,WAASL,WAAT,CAAqB3B,CAArB,EAAuB;AACrBA,IAAAA,CAAC,CAACC,cAAF;AAEAb,IAAAA,UAAU,CAAC,EAAD,CAAV;AACAE,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAE,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,IAAAA,KAAK,CAAC,EAAD,CAAL;AACAqC,IAAAA,SAAS;AACV;;AAED,WAASA,SAAT,GAAqB;AACnBnC,IAAAA,MAAM,CAAC,CAACD,GAAF,CAAN;AACD;;AAED,WAASqC,YAAT,CAAsBL,QAAtB,EAAgC;AAE9B,UAAMM,CAAC,GAAG1B,MAAM,CAAC2B,OAAP,CAAe,0CAAf,CAAV;;AAEA,QAAGD,CAAH,EAAK;AACHjD,MAAAA,OAAO,CAAED,IAAI,CAACyC,MAAL,CAAYL,CAAC,IAAIA,CAAC,KAAKQ,QAAvB,CAAF,CAAP;AACAzC,MAAAA,UAAU,CAAC,EAAD,CAAV;AACAE,MAAAA,YAAY,CAAC,EAAD,CAAZ;AACAE,MAAAA,SAAS,CAAC,EAAD,CAAT;AACAE,MAAAA,WAAW,CAAC,EAAD,CAAX;AACAuC,MAAAA,SAAS;AACTnC,MAAAA,MAAM,CAAC,KAAD,CAAN;AACD;AACF;;AAED1B,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMwC,IAAI,GAAGyB,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAb;;AACA,QAAG1B,IAAH,EAAQ;AACN1B,MAAAA,OAAO,CAACqD,IAAI,CAACC,KAAL,CAAW5B,IAAX,CAAD,CAAP;AACD;AACF,GALQ,EAKN,EALM,CAAT;AAOAxC,EAAAA,SAAS,CAAC,MAAM;AACdiE,IAAAA,YAAY,CAACI,OAAb,CAAqB,WAArB,EAAkCF,IAAI,CAACG,SAAL,CAAezD,IAAf,CAAlC;AACD,GAFQ,EAEN,CAACA,IAAD,CAFM,CAAT;AAIA,QAAM0D,QAAQ,GAAGtE,OAAO,CAAC,MAAMY,IAAI,CAACqB,MAAZ,EAAoB,CAACrB,IAAD,CAApB,CAAxB;AAGF,SACE,0CACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,EAEI,oBAAC,IAAD;AAAM,IAAA,QAAQ,EAAE,MAAM,CAAE,CAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,WAFd;AAGE,IAAA,KAAK,EAAEE,OAHT;AAIE,IAAA,IAAI,EAAC,MAJP;AAKE,IAAA,QAAQ,EAAEa,CAAC,IAAIZ,UAAU,CAACY,CAAC,CAAC4C,MAAF,CAASC,KAAV,CAL3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,QAFd;AAGE,IAAA,KAAK,EAAExD,SAHT;AAIE,IAAA,IAAI,EAAC,QAJP;AAKE,IAAA,QAAQ,EAAEW,CAAC,IAAIV,YAAY,CAACU,CAAC,CAAC4C,MAAF,CAASC,KAAV,CAL7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,EAeE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,WAFd;AAGE,IAAA,KAAK,EAAEtD,MAHT;AAIE,IAAA,IAAI,EAAC,KAJP;AAKE,IAAA,QAAQ,EAAES,CAAC,IAAIR,SAAS,CAACQ,CAAC,CAAC4C,MAAF,CAASC,KAAV,CAL1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfF,EAsBE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,KAAK,EAAEpD,QAHT;AAIE,IAAA,IAAI,EAAC,OAJP;AAKE,IAAA,QAAQ,EAAEO,CAAC,IAAIN,WAAW,CAACM,CAAC,CAAC4C,MAAF,CAASC,KAAV,CAL5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAtBF,EA+BE,CAAChD,GAAD,GACE,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEE,SAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,IAAI,EAAE,EAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFA,CADF,GAKE,yCApCJ,EAwCEF,GAAG,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEc,YAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,IAAI,EAAE,EAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,CADF,EAMI,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEgB,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAC,MAAf;AAAsB,IAAA,IAAI,EAAE,EAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,CANJ,CADD,GAaC,yCArDN,CAFJ,EA4DMgB,QAAQ,GAAE,CAAV,IAAeA,QAAQ,KAAK,CAA5B,GACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAcA,QAAd,WADA,GAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAcA,QAAd,UA/DN,CADF,EAqEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEM1D,IAAI,CAAC6D,GAAL,CAAU7D,IAAI,IACZ,oBAAC,QAAD;AACA,IAAA,GAAG,EAAEA,IAAI,CAACU,EADV;AAEA,IAAA,IAAI,EAAEV,IAFN;AAGA,IAAA,QAAQ,EAAE,MAAM;AAACiD,MAAAA,YAAY,CAACjD,IAAD,CAAZ;AAAmB,KAHpC;AAIA,IAAA,MAAM,EAAE,MAAM;AAAC2C,MAAAA,UAAU,CAAC3C,IAAD,CAAV;AAAiB,KAJhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFN,CArEF,CADF;AAoFD;;AAED,eAAeD,IAAf","sourcesContent":["import React, { useState, useEffect, useMemo, useCallback} from 'react';\nimport { BookList, Container, Form, SubmitButton, UpdateButton  } from './styles';\nimport { FaPlus, FaEdit, FaTimes  } from \"react-icons/fa\";\nimport BookItem from '../../components/BookItem'\n\nfunction Main() {\n\n  const [book, setBook] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newAuthor, setNewAuthor] = useState('');\n  const [newUrl, setNewUrl] = useState('');\n\n  const [newNotes, setNewNotes] = useState('');\n  const [id, setId] = useState('');\n\n  const[box, setBox] = useState();\n\n  const handleAdd = useCallback( e => {\n\n    if (newName){\n\n    e.preventDefault()\n\n    let id = Math.floor(Math.random() * 700);\n\n    //validation for duplicate ID' and set limit for book amount\n    for(let i= 0; i<book.length; i++){\n      if(id === book[i].id){\n          console.log('igual a'+ id + '!')\n          if(book.length >= 4){\n            window.alert(\"You reached the limit of books!\")\n            return 0\n          }else\n          id = Math.floor(Math.random() * 700 );\n          i=0;\n      }\n    }\n\n    setBook([ ...book,\n      {\n      newName,\n      newAuthor,\n      newUrl,\n      newNotes,\n      id\n    }]);\n\n    setNewName('');\n    setNewAuthor('');\n    setNewUrl('');\n    setNewNotes('');\n    setId('')\n\n  } else\n    alert('Book name is Required!');\n    e.preventDefault()\n  });\n\n    function handleUpdate(e){\n\n      e.preventDefault()\n      const data = [...book];\n      const index = data.findIndex(obj => data.indexOf(obj) === book.indexOf(obj));\n\n      let secData = {...data[index]}\n\n      secData.newName =  newName\n      secData.newAuthor = newAuthor\n      secData.newUrl = newUrl\n      secData.newNotes = newNotes\n      secData.id = id\n\n      let newObj = {...secData}\n      let arr = []\n\n      data.forEach((b) => arr.push(b))\n\n      const currentObj = arr.find(obj => obj.newName === newObj.newName);\n      const destObj = {...currentObj}\n\n      destObj.newName =  newName\n      destObj.newAuthor = newAuthor\n      destObj.newUrl = newUrl\n      destObj.newNotes = newNotes\n      destObj.id = Math.floor(Math.random() * 700);\n\n      setBook([ ...data.filter( b => b.id !== secData.id ),\n        destObj\n     ]);\n\n      handleClean(e)\n    }\n\n    function handleEdit(bookItem){\n\n      setBox(true)\n      setNewName(bookItem.newName);\n      setNewAuthor(bookItem.newAuthor);\n      setNewUrl(bookItem.newUrl);\n      setNewNotes(bookItem.newNotes);\n      setId(bookItem.id);\n\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n      });\n\n    }\n\n    function handleClean(e){\n      e.preventDefault()\n\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      setId('')\n      toggleBox()\n    }\n\n    function toggleBox() {\n      setBox(!box)\n    }\n\n    function handleDelete(bookItem) {\n\n      const r = window.confirm(\"Are you sure you want to dele this book?\")\n\n      if(r){\n        setBook( book.filter(b => b !== bookItem))\n        setNewName('');\n        setNewAuthor('');\n        setNewUrl('');\n        setNewNotes('');\n        toggleBox()\n        setBox(false)\n      }\n    }\n\n    useEffect(() => {\n      const data = localStorage.getItem('book-list');\n      if(data){\n        setBook(JSON.parse(data));\n      }\n    }, []);\n\n    useEffect(() => {\n      localStorage.setItem('book-list', JSON.stringify(book));\n    }, [book]);\n\n    const bookSize = useMemo(() => book.length, [book])\n\n\n  return (\n    <>\n      <Container >\n        <h1>Add Book to the Shelf</h1>\n          <Form onSubmit={() => {}}>\n            <input\n              type=\"text\"\n              placeholder=\"Book Name\"\n              value={newName}\n              name=\"name\"\n              onChange={e => setNewName(e.target.value)}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Author\"\n              value={newAuthor}\n              name=\"author\"\n              onChange={e => setNewAuthor(e.target.value)}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"URL image\"\n              value={newUrl}\n              name=\"url\"\n              onChange={e => setNewUrl(e.target.value)}\n            />\n            <textarea\n              type=\"text\"\n              placeholder=\"Notes\"\n              value={newNotes}\n              name=\"notes\"\n              onChange={e => setNewNotes(e.target.value)}\n            />\n\n            {\n            !box ?\n              <SubmitButton onClick={handleAdd}  >\n              <FaPlus color='#fff' size={22} />\n              <span>Add Book</span>\n            </SubmitButton>\n            : <></>\n            }\n\n          {\n            box ?\n                <div>\n                  <UpdateButton onClick={handleUpdate}  >\n                    <FaEdit color='#fff' size={22} />\n                    <span>Save Changes</span>\n                  </UpdateButton>\n\n                    <UpdateButton onClick={handleClean}  >\n                      <FaTimes color='#fff' size={22} />\n                      <span>Cancel</span>\n                    </UpdateButton>\n                </div>\n                :\n                <></>\n          }\n\n          </Form>\n          {\n            bookSize >1 || bookSize === 0 ?\n            <h3>You have {bookSize} books</h3>\n            :\n            <h3>You have {bookSize} book</h3>\n          }\n\n      </Container>\n\n      <BookList>\n          {\n            book.map( book => (\n              <BookItem\n              key={book.id}\n              book={book}\n              onDelete={() => {handleDelete(book)}}\n              onEdit={() => {handleEdit(book)}}\n              />\n            ))\n          }\n      </BookList>\n    </>\n  );\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}