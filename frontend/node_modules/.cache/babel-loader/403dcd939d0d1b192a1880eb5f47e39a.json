{"ast":null,"code":"var _jsxFileName = \"/home/gabriel/my-shelf/src/pages/Main/index.js\";\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BookList, Container, Form, SubmitButton, UpdateButton } from './styles';\nimport { FaPlus, FaEdit, FaTimes } from \"react-icons/fa\";\nimport BookItem from '../../components/BookItem';\nimport api from '../../services/api';\n\nfunction Main() {\n  const [book, setBook] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newAuthor, setNewAuthor] = useState('');\n  const [newUrl, setNewUrl] = useState('');\n  const [newNotes, setNewNotes] = useState('');\n  const [id, setId] = useState('');\n  const [box, setBox] = useState();\n  const handleAdd = useCallback(e => {\n    if (newName) {\n      e.preventDefault();\n      let id = Math.floor(Math.random() * 700);\n      id = Math.floor(Math.random() * 9999999);\n      setBook([...book, {\n        newName,\n        newAuthor,\n        newUrl,\n        newNotes,\n        id\n      }]);\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      setId('');\n    } else alert('Book name is Required!');\n\n    e.preventDefault();\n  }, [book, newName, newAuthor, newUrl, newNotes]);\n  const toggleBox = useCallback(() => {\n    setBox(!box);\n  }, [box]);\n  const handleClean = useCallback(e => {\n    e.preventDefault();\n    setNewName('');\n    setNewAuthor('');\n    setNewUrl('');\n    setNewNotes('');\n    setId('');\n    toggleBox();\n  }, [toggleBox]);\n  const handleUpdate = useCallback(e => {\n    e.preventDefault();\n    const data = [...book];\n    const index = data.findIndex(obj => data.indexOf(obj) === book.indexOf(obj));\n    let secData = { ...data[index]\n    };\n    secData.newName = newName;\n    secData.newAuthor = newAuthor;\n    secData.newUrl = newUrl;\n    secData.newNotes = newNotes;\n    secData.id = id;\n    let newObj = { ...secData\n    };\n    let arr = [];\n    data.forEach(b => arr.push(b));\n    const currentObj = arr.find(obj => obj.newName === newObj.newName);\n    const destObj = { ...currentObj\n    };\n    destObj.newName = newName;\n    destObj.newAuthor = newAuthor;\n    destObj.newUrl = newUrl;\n    destObj.newNotes = newNotes;\n    destObj.id = Math.floor(Math.random() * 700);\n    setBook([...data.filter(b => b.id !== secData.id), destObj]);\n    handleClean(e);\n  }, [book, newName, newAuthor, newUrl, newNotes, handleClean, id]);\n  const handleEdit = useCallback(bookItem => {\n    setBox(true);\n    setNewName(bookItem.newName);\n    setNewAuthor(bookItem.newAuthor);\n    setNewUrl(bookItem.newUrl);\n    setNewNotes(bookItem.newNotes);\n    setId(bookItem.id);\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n  }, []);\n  const handleDelete = useCallback(bookItem => {\n    const r = window.confirm(\"Are you sure you want to dele this book?\");\n\n    if (r) {\n      setBook(book.filter(b => b !== bookItem));\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      toggleBox();\n      setBox(false);\n    }\n  }, [book, toggleBox]);\n  useEffect(() => {\n    const data = localStorage.getItem('book-list');\n\n    if (data) {\n      setBook(JSON.parse(data));\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('book-list', JSON.stringify(book));\n  }, [book]);\n  const bookSize = useMemo(() => book.length, [book]);\n  return React.createElement(React.Fragment, null, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Add Book to the Shelf\"), React.createElement(Form, {\n    onSubmit: () => {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Book Name\",\n    value: newName,\n    name: \"name\",\n    onChange: e => setNewName(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Author\",\n    value: newAuthor,\n    name: \"author\",\n    onChange: e => setNewAuthor(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"URL image\",\n    value: newUrl,\n    name: \"url\",\n    onChange: e => setNewUrl(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }), React.createElement(\"textarea\", {\n    type: \"text\",\n    placeholder: \"Notes\",\n    value: newNotes,\n    name: \"notes\",\n    onChange: e => setNewNotes(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }), !box ? React.createElement(SubmitButton, {\n    onClick: handleAdd,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(FaPlus, {\n    color: \"#fff\",\n    size: 22,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, \"Add Book\")) : React.createElement(React.Fragment, null), box ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, React.createElement(UpdateButton, {\n    onClick: handleUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(FaEdit, {\n    color: \"#fff\",\n    size: 22,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, \"Save Changes\")), React.createElement(UpdateButton, {\n    onClick: handleClean,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, React.createElement(FaTimes, {\n    color: \"#fff\",\n    size: 22,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, \"Cancel\"))) : React.createElement(React.Fragment, null)), bookSize > 1 || bookSize === 0 ? React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, \"You have \", bookSize, \" books\") : React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, \"You have \", bookSize, \" book\")), React.createElement(BookList, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, book.map(book => React.createElement(BookItem, {\n    key: book.id,\n    book: book,\n    onDelete: () => {\n      handleDelete(book);\n    },\n    onEdit: () => {\n      handleEdit(book);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }))));\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/gabriel/my-shelf/src/pages/Main/index.js"],"names":["React","useState","useEffect","useMemo","useCallback","BookList","Container","Form","SubmitButton","UpdateButton","FaPlus","FaEdit","FaTimes","BookItem","api","Main","book","setBook","newName","setNewName","newAuthor","setNewAuthor","newUrl","setNewUrl","newNotes","setNewNotes","id","setId","box","setBox","handleAdd","e","preventDefault","Math","floor","random","alert","toggleBox","handleClean","handleUpdate","data","index","findIndex","obj","indexOf","secData","newObj","arr","forEach","b","push","currentObj","find","destObj","filter","handleEdit","bookItem","window","scrollTo","top","behavior","handleDelete","r","confirm","localStorage","getItem","JSON","parse","setItem","stringify","bookSize","length","target","value","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { BookList, Container, Form, SubmitButton, UpdateButton } from './styles';\nimport { FaPlus, FaEdit, FaTimes } from \"react-icons/fa\";\nimport BookItem from '../../components/BookItem'\nimport api from '../../services/api';\n\n\nfunction Main() {\n\n  const [book, setBook] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newAuthor, setNewAuthor] = useState('');\n  const [newUrl, setNewUrl] = useState('');\n\n  const [newNotes, setNewNotes] = useState('');\n  const [id, setId] = useState('');\n\n  const [box, setBox] = useState();\n\n  const handleAdd = useCallback(e => {\n\n    if (newName) {\n\n      e.preventDefault()\n\n      let id = Math.floor(Math.random() * 700);\n\n      id = Math.floor(Math.random() * 9999999);\n\n\n      setBook([...book,\n      {\n        newName,\n        newAuthor,\n        newUrl,\n        newNotes,\n        id\n      }]);\n\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      setId('')\n\n    } else\n      alert('Book name is Required!');\n    e.preventDefault()\n  }, [\n    book,\n    newName,\n    newAuthor,\n    newUrl,\n    newNotes,\n  ]);\n\n  const toggleBox = useCallback(() => {\n    setBox(!box)\n  }, [box]);\n\n  const handleClean = useCallback(e => {\n    e.preventDefault()\n\n    setNewName('');\n    setNewAuthor('');\n    setNewUrl('');\n    setNewNotes('');\n    setId('')\n    toggleBox()\n  }, [toggleBox]\n  );\n\n  const handleUpdate = useCallback(e => {\n\n    e.preventDefault()\n    const data = [...book];\n    const index = data.findIndex(obj => data.indexOf(obj) === book.indexOf(obj));\n\n    let secData = { ...data[index] }\n\n    secData.newName = newName\n    secData.newAuthor = newAuthor\n    secData.newUrl = newUrl\n    secData.newNotes = newNotes\n    secData.id = id\n\n    let newObj = { ...secData }\n    let arr = []\n\n    data.forEach((b) => arr.push(b))\n\n    const currentObj = arr.find(obj => obj.newName === newObj.newName);\n    const destObj = { ...currentObj }\n\n    destObj.newName = newName\n    destObj.newAuthor = newAuthor\n    destObj.newUrl = newUrl\n    destObj.newNotes = newNotes\n    destObj.id = Math.floor(Math.random() * 700);\n\n    setBook([...data.filter(b => b.id !== secData.id),\n      destObj\n    ]);\n\n    handleClean(e)\n\n  }, [book,\n    newName,\n    newAuthor,\n    newUrl,\n    newNotes,\n    handleClean,\n    id\n  ]);\n\n    const handleEdit = useCallback( bookItem => {\n\n    setBox(true)\n    setNewName(bookItem.newName);\n    setNewAuthor(bookItem.newAuthor);\n    setNewUrl(bookItem.newUrl);\n    setNewNotes(bookItem.newNotes);\n    setId(bookItem.id);\n\n    window.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n\n  }, [] );\n\n    const handleDelete = useCallback( bookItem => {\n\n    const r = window.confirm(\"Are you sure you want to dele this book?\")\n\n    if (r) {\n      setBook(book.filter(b => b !== bookItem))\n      setNewName('');\n      setNewAuthor('');\n      setNewUrl('');\n      setNewNotes('');\n      toggleBox()\n      setBox(false)\n    }\n  }, [book, toggleBox]);\n\n  useEffect(() => {\n    const data = localStorage.getItem('book-list');\n    if (data) {\n      setBook(JSON.parse(data));\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('book-list', JSON.stringify(book));\n  }, [book]);\n\n  const bookSize = useMemo(() => book.length, [book])\n\n\n  return (\n    <>\n      <Container >\n        <h1>Add Book to the Shelf</h1>\n        <Form onSubmit={() => { }}>\n          <input\n            type=\"text\"\n            placeholder=\"Book Name\"\n            value={newName}\n            name=\"name\"\n            onChange={e => setNewName(e.target.value)}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Author\"\n            value={newAuthor}\n            name=\"author\"\n            onChange={e => setNewAuthor(e.target.value)}\n          />\n          <input\n            type=\"text\"\n            placeholder=\"URL image\"\n            value={newUrl}\n            name=\"url\"\n            onChange={e => setNewUrl(e.target.value)}\n          />\n          <textarea\n            type=\"text\"\n            placeholder=\"Notes\"\n            value={newNotes}\n            name=\"notes\"\n            onChange={e => setNewNotes(e.target.value)}\n          />\n\n          {\n            !box ?\n              <SubmitButton onClick={handleAdd}  >\n                <FaPlus color='#fff' size={22} />\n                <span>Add Book</span>\n              </SubmitButton>\n              : <></>\n          }\n\n          {\n            box ?\n              <div>\n                <UpdateButton onClick={handleUpdate}  >\n                  <FaEdit color='#fff' size={22} />\n                  <span>Save Changes</span>\n                </UpdateButton>\n\n                <UpdateButton onClick={handleClean}  >\n                  <FaTimes color='#fff' size={22} />\n                  <span>Cancel</span>\n                </UpdateButton>\n              </div>\n              :\n              <></>\n          }\n\n        </Form>\n        {\n          bookSize > 1 || bookSize === 0 ?\n            <h3>You have {bookSize} books</h3>\n            :\n            <h3>You have {bookSize} book</h3>\n        }\n\n      </Container>\n\n      <BookList>\n        {\n          book.map(book => (\n            <BookItem\n              key={book.id}\n              book={book}\n              onDelete={() => { handleDelete(book) }}\n              onEdit={() => { handleEdit(book) }}\n            />\n          ))\n        }\n      </BookList>\n    </>\n  );\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}